(()=>{"use strict";class t{constructor(t,e,r){this.abrir=document.querySelector(t),this.container=document.querySelector(e),this.fechar=document.querySelector(r),this.activeClass="ativo",this.toggleMenu=this.toggleMenu.bind(this)}toggleMenu(t){t.preventDefault(),this.container.classList.toggle(this.activeClass)}addEventListeners(){this.abrir.addEventListener("click",this.toggleMenu),this.fechar.addEventListener("click",this.toggleMenu)}init(){return this.abrir&&this.addEventListeners(),this}}async function e(t,e="GET",r={},i=null){const s={method:e,headers:r};i&&(s.body=JSON.stringify(i));try{const e=await fetch(t,s);if(!e.ok)throw new Error(`Erro ao buscar dados: ${e.status}`)}catch(t){throw console.error("Erro ao buscar dados:",t),t}}class r{constructor(t,e,r,i,s){this.button=document.querySelector(t),this.form=document.querySelector(e),this.url=r,this.method=i,this.headers=s,this.handleClick=this.handleClick.bind(this)}static validarTelefone(t){let e=t;if(e=e.replace(/[^\d]+/g,""),10!==e.length&&11!==e.length)return!1;const r=e.substring(0,2);return!!["11","12","13","14","15","16","17","18","19","21","22","24","27","28","31","32","33","34","35","37","38","41","42","43","44","45","46","47","48","49","51","53","54","55","61","62","63","64","65","66","67","68","69","71","73","74","75","77","79","81","82","83","84","85","86","87","88","89","91","92","93","94","95","96","97","98","99"].includes(r)}static formatarCPF(t){return(t=(t=(t=t.replace(/\D/g,"")).replace(/^(\d{3})(\d)/,"$1.$2")).replace(/^(\d{3})\.(\d{3})(\d)/,"$1.$2.$3")).replace(/\.(\d{3})(\d)/,".$1-$2")}static formatarCNPJ(t){return(t=(t=(t=(t=t.replace(/\D/g,"")).replace(/^(\d{2})(\d)/,"$1.$2")).replace(/^(\d{2})\.(\d{3})(\d)/,"$1.$2.$3")).replace(/\.(\d{3})(\d)/,".$1/$2")).replace(/(\d{4})(\d)/,"$1-$2")}static validarCNPJ(t){if(14!==(t=t.replace(/[^\d]+/g,"")).length)return!1;if("00000000000000"===t||"11111111111111"===t||"22222222222222"===t||"33333333333333"===t||"44444444444444"===t||"55555555555555"===t||"66666666666666"===t||"77777777777777"===t||"88888888888888"===t||"99999999999999"===t)return!1;let e=t.length-2,r=t.substring(0,e);const i=t.substring(e);let s=0,a=e-7;for(let t=e;t>=1;t--)s+=r.charAt(e-t)*a--,a<2&&(a=9);let n=s%11<2?0:11-s%11;if(n!==Number(i.charAt(0)))return!1;e+=1,r=t.substring(0,e),s=0,a=e-7;for(let t=e;t>=1;t--)s+=r.charAt(e-t)*a--,a<2&&(a=9);return n=s%11<2?0:11-s%11,n===Number(i.charAt(1))}static validarCPF(t){if(11!==(t=t.replace(/[^\d]+/g,"")).length)return!1;if(/^(\d)\1+$/.test(t))return!1;let e=0;for(let r=0;r<9;r+=1)e+=Number(t.charAt(r))*(10-r);let r=e%11,i=r<2?0:11-r;if(i!==Number(t.charAt(9)))return!1;e=0;for(let r=0;r<10;r+=1)e+=Number(t.charAt(r))*(11-r);return r=e%11,i=r<2?0:11-r,i===Number(t.charAt(10))}static validarEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}static erroValidacao(t,e){const r=document.createElement("span");return r.style.color="red",r.innerText=`Erro no ${e}`,t.insertAdjacentElement("afterend",r),r}limparInput(){this.form.querySelectorAll("input, textarea").forEach((t=>{t.value=""}))}async handleClick(t){t.preventDefault(),console.log(typeof this.form);const i=this.form.querySelector("input[name='cpf']"),s=this.form.querySelector("#email"),a=this.form.querySelector("#cel"),n=a?a.value:"";if(this.form.querySelector("input[name='fullName']").value.length<3)alert("Insira um nome valido");else if(!n||r.validarTelefone(n))if(!i||""===i.value||r.validarCPF(r.formatarCPF(i.value)))if(!s||""===s.value||r.validarEmail(s.value))if("GET"===this.method)e(this.url,this.method).then((t=>console.log(t)));else{const t=new FormData(this.form),r={};for(const[e,i]of t)r[e]=i;try{await e(this.url,this.method,this.headers,r),this.limparInput(),alert("Enviado!")}catch(t){console.log(t)}}else r.erroValidacao(n,"telefone");else r.erroValidacao(i,"cpf");else alert("Telefone inválido!")}addEventListeners(){this.button.addEventListener("click",this.handleClick)}init(){return this.button&&this.addEventListeners(),this}}new t("#btn-menu-mobile",".menu-mobile","#btn-mobile-fechar").init(),new t("#btn-rastreio","[data-rastreio]","#btn-rastreio-fechar").init(),new t("#abrir-termos","[data-termos]","#btn-termos-fechar").init(),new class{constructor(t,e,r){this.abrir=document.querySelector(t),this.form=document.querySelectorAll(`${e} select`),this.container=document.querySelector(r),this.handleClick=this.handleClick.bind(this),this.dadosFetch=this.dadosFetch.bind(this)}async dadosFetch(){if(this.form[0].value&&this.form[1].value){const t=document.createElement("img");t.src="./assets/img/loading.svg",t.className="rotate-image",this.container.appendChild(t);try{console.log(this.form[0].value),console.log("olá");const t=await e("https://zoe-production-4a9e.up.railway.app/product","GET");return console.log(t),t}catch(t){console.log(t)}finally{this.container.removeChild(t)}}return null}createDiv(t){const e=this.container.querySelector(".valores-popup");e&&this.container.removeChild(e);const r=document.createElement("div");return r.className="valores-popup cor-p5 ativo",r.setAttribute("data-anime","slide-left"),r.innerHTML=`\n    <h1>VALOR R$${t},00</h1>\n  `,this.container.appendChild(r),r}handleClick(t){t.preventDefault(),this.dadosFetch().then((t=>{const e=this.form[0].value.toLowerCase(),r=this.form[1].value.toLowerCase();let i=null;t?t.forEach((t=>{const[s,a]=t.name.toLowerCase().split("x");(s===e&&a===r||s===r&&a===e)&&(i=t.price)})):window.alert("[ERROR] Insira um valor válido!"),i&&(console.log(i),this.createDiv(i))}))}addEventListeners(){this.abrir.addEventListener("click",this.handleClick)}init(){this.abrir&&this.addEventListeners()}}("#btn-consultar-valor","[data-form='simular-valor']","[data-form='simular-valor']").init(),new r("#enviar-contato","[data-form='contato']","https://zoe-production-4a9e.up.railway.app/contact","POST",{"Content-Type":"application/json"}).init(),new class{constructor(t){this.nav=document.querySelector(t),this.handleScroll=this.handleScroll.bind(this)}handleScroll(){const t=window.scrollY-25,{height:e}=this.nav.getBoundingClientRect();t>e?this.nav.classList.add("ativo"):this.nav.classList.remove("ativo")}addEventListeners(){window.addEventListener("scroll",(()=>{this.handleScroll(),window.removeEventListener("scroll",this.handleScroll)}))}init(){this.addEventListeners()}}(".navegacao-bg").init(),new class{constructor(t){this.anime=document.querySelectorAll(t),this.handleScroll=this.handleScroll.bind(this)}handleScroll(){const t=.6*window.innerHeight;this.anime.forEach((e=>{const{top:r}=e.getBoundingClientRect();t-r>0?e.classList.add("ativo"):e.classList.remove("ativo")}))}addEventListeners(){window.addEventListener("scroll",this.handleScroll)}init(){return this.addEventListeners(),this.anime[0].classList.add("ativo"),this}}("[data-anime]").init(),new class{constructor(t,e){this.forms=document.querySelectorAll(t),this.navItems=document.querySelectorAll(e),this.formIndex=0,this.currentForm=this.forms[this.formIndex],this.currentForm&&(this.cpfInput=this.currentForm.querySelector('input[name="cpf"]')),this.handleSubmit=this.handleSubmit.bind(this)}async handleSubmit(t){t.preventDefault();const i=new FormData(this.currentForm),s=Object.fromEntries([...i]),a=this.currentForm.querySelector("#termos");if(a&&!a.checked)return void alert("Leia os termos de serviço!");if(this.cpfInput.length&&!r.validarCPF(r.formatarCPF(this.cpfInput.value))&&!r.validarCNPJ(r.formatarCNPJ(this.cpfInput.value)))return alert("CPF/CNPJ inválido!"),void this.cpfInput.focus();const n=document.createElement("img");n.src="./assets/img/loading.svg",n.className="rotate-image",this.currentForm.appendChild(n);try{await e(`https://zoe-production-4a9e.up.railway.app/${this.currentForm.dataset.form}`,"POST",{"Content-Type":"application/json"},s),this.formIndex+=1,this.limparInput(),this.formIndex<this.forms.length&&(this.currentForm.classList.remove("ativo"),this.navItems[this.formIndex-1].classList.remove("ativo"),this.navItems[this.formIndex].classList.add("ativo"),this.currentForm=this.forms[this.formIndex],this.currentForm.classList.add("ativo"),this.currentForm.addEventListener("submit",this.handleSubmit.bind(this)))}catch(t){console.error(t)}finally{this.forms[this.formIndex-1].removeChild(n)}}formatarCPFCPNJ(t){t.length>18&&(t=t.slice(0,18)),t.length<=14?(this.cpfInput.value=r.formatarCPF(t),r.validarCPF(r.formatarCPF(t))?this.cpfInput.classList.remove("erro"):this.cpfInput.classList.add("erro")):(this.cpfInput.value=r.formatarCNPJ(t),r.validarCNPJ(r.formatarCNPJ(t))?this.cpfInput.classList.remove("erro"):this.cpfInput.classList.add("erro"))}limparInput(){this.currentForm.querySelectorAll("input, textarea, select").forEach((t=>{const e=t;e.value="",e.checked=!1}))}addEventListeners(){this.currentForm.addEventListener("submit",this.handleSubmit),this.cpfInput.addEventListener("input",(()=>{this.formatarCPFCPNJ(this.cpfInput.value)}))}init(){return this.currentForm&&this.cpfInput&&(this.addEventListeners(),this.currentForm.classList.add("ativo"),this.navItems[this.formIndex].classList.add("ativo")),this}}("[data-fazer-pedido]",".cadastro-nav-item").init()})();